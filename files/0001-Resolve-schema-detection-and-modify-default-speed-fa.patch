From abb8f961d9471cfcc53d69ff5fc5b8fd6bc05edd Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@stroblindustries.com>
Date: Thu, 6 Apr 2017 01:53:43 +0300
Subject: [PATCH 1/1] Resolve schema detection and modify default speed factor.

---
 ...shell.extensions.net.gfxmonk.impatience.gschema.xml |  2 +-
 impatience/settings.js                                 | 18 +-----------------
 2 files changed, 2 insertions(+), 18 deletions(-)

diff --git a/impatience/schemas/org.gnome.shell.extensions.net.gfxmonk.impatience.gschema.xml b/impatience/schemas/org.gnome.shell.extensions.net.gfxmonk.impatience.gschema.xml
index ffd0c93..064cbb6 100644
--- a/impatience/schemas/org.gnome.shell.extensions.net.gfxmonk.impatience.gschema.xml
+++ b/impatience/schemas/org.gnome.shell.extensions.net.gfxmonk.impatience.gschema.xml
@@ -2,7 +2,7 @@
 <schemalist>
 	<schema id="org.gnome.shell.extensions.net.gfxmonk.impatience" path="/org/gnome/shell/extensions/net/gfxmonk/impatience/">
 		<key type="d" name="speed-factor">
-			<default>0.75</default>
+			<default>0.50</default>
 			<summary>speed factor</summary>
 			<description/>
 		</key>
diff --git a/impatience/settings.js b/impatience/settings.js
index 50d1649..2266918 100644
--- a/impatience/settings.js
+++ b/impatience/settings.js
@@ -5,23 +5,7 @@ const Extension = ExtensionUtils.getCurrentExtension();
 const SCHEMA_PATH = 'org.gnome.shell.extensions.net.gfxmonk.impatience';
 
 function get_local_gsettings(schema_path) {
-	const GioSSS = Gio.SettingsSchemaSource;
-
-	let schemaDir = Extension.dir.get_child('schemas');
-	let schemaSource = GioSSS.new_from_directory(
-		schemaDir.get_path(),
-		GioSSS.get_default(),
-		false);
-
-	let schemaObj = schemaSource.lookup(schema_path, true);
-	if (!schemaObj) {
-		throw new Error(
-			'Schema ' + schema_path +
-			' could not be found for extension ' +
-			Extension.metadata.uuid
-		);
-	}
-	return new Gio.Settings({ settings_schema: schemaObj });
+	return new Gio.Settings({ schema_id: SCHEMA_PATH });
 };
 
 function Prefs() {
-- 
2.12.2

